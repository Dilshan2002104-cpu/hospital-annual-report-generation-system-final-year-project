services:
  # Backend Service (Development)
  backend:
    build:
      context: ./HMS
      dockerfile: Dockerfile
    container_name: hms-backend-dev
    restart: unless-stopped
    environment:
      # Database configuration (using host MySQL)
      SPRING_DATASOURCE_URL: jdbc:mysql://host.docker.internal:3306/hms
      SPRING_DATASOURCE_USERNAME: hmsuser
      SPRING_DATASOURCE_PASSWORD: SecurePassword123!
      
      # JPA Configuration
      SPRING_JPA_HIBERNATE_DDL_AUTO: update
      SPRING_JPA_SHOW_SQL: true
      SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT: org.hibernate.dialect.MySQL8Dialect
      
      # Server configuration
      SERVER_PORT: 8080
      SERVER_ADDRESS: 0.0.0.0
      
      # Development profile
      SPRING_PROFILES_ACTIVE: development
    ports:
      - "8080:8080"
    networks:
      - hms-network

  # Frontend Service (Development)
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: hms-frontend-dev
    restart: unless-stopped
    environment:
      - NODE_ENV=development
    ports:
      - "3000:80"
    depends_on:
      - backend
    networks:
      - hms-network

networks:
  hms-network:
    driver: bridge